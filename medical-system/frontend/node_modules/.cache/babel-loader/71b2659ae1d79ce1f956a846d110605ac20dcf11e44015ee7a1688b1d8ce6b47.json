{"ast":null,"code":"import React,{useEffect}from'react';import{useParams,useNavigate}from'react-router-dom';import{useDispatch,useSelector}from'react-redux';import{Row,Col,Card,Button}from'react-bootstrap';import{editOrderById,updateOrderStatus}from'../actions/staffAction';import Loader from'../components/Loader';import Message from'../components/Message';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const EditOrderScreen=()=>{const{id:orderId}=useParams();const navigate=useNavigate();const dispatch=useDispatch();const editOrder=useSelector(state=>state.editOrder);const{loading,error,orderDetial}=editOrder;const updateStatusInfo=useSelector(state=>state.orderUpdateStatus);const{success}=updateStatusInfo;useEffect(()=>{dispatch(editOrderById(orderId));},[dispatch,orderId]);//如果成功 重新发送\nuseEffect(()=>{if(success){dispatch(editOrderById(orderId));}},[dispatch,orderId,success]);const updateStatus=(itemIndex,newStatus)=>{dispatch(updateOrderStatus(orderId,itemIndex,newStatus));};const medicalCheck=orderId=>{navigate(\"/staffs/orders/\".concat(orderId,\"/check\"));};if(loading)return/*#__PURE__*/_jsx(Loader,{});if(error)return/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:error});if(!orderDetial)return/*#__PURE__*/_jsx(Message,{variant:\"info\",children:\"Order not found\"});return/*#__PURE__*/_jsx(Row,{className:\"justify-content-md-center\",children:/*#__PURE__*/_jsx(Col,{md:6,children:/*#__PURE__*/_jsx(Card,{className:\"text-center\",onClick:()=>medicalCheck(orderId),children:/*#__PURE__*/_jsxs(Card.Body,{children:[/*#__PURE__*/_jsx(Card.Title,{style:{fontSize:'24px'},children:orderDetial.user.name}),/*#__PURE__*/_jsx(Card.Text,{style:{fontSize:'20px'},children:/*#__PURE__*/_jsx(\"a\",{href:\"mailto:\".concat(orderDetial.user.email),children:orderDetial.user.email})}),/*#__PURE__*/_jsxs(Card.Text,{style:{fontSize:'20px'},children:[\"illnessDescription:\",orderDetial.illnessDescription]}),/*#__PURE__*/_jsxs(Card.Text,{style:{fontSize:'20px'},children:[\"Status: \",orderDetial.orderItems[0].status]}),/*#__PURE__*/_jsx(Button,{variant:\"success\",onClick:()=>updateStatus(0,'Scheduled'),className:\"m-2\",children:\"Scheduled\"}),/*#__PURE__*/_jsx(Button,{variant:\"danger\",onClick:()=>updateStatus(0,'Cancelled'),className:\"m-2\",children:\"Cancelled\"}),/*#__PURE__*/_jsx(Button,{variant:\"warning\",onClick:()=>updateStatus(0,'Transfer'),className:\"m-2\",children:\"Transfer\"})]})})})});};export default EditOrderScreen;","map":{"version":3,"names":["React","useEffect","useParams","useNavigate","useDispatch","useSelector","Row","Col","Card","Button","editOrderById","updateOrderStatus","Loader","Message","jsx","_jsx","jsxs","_jsxs","EditOrderScreen","id","orderId","navigate","dispatch","editOrder","state","loading","error","orderDetial","updateStatusInfo","orderUpdateStatus","success","updateStatus","itemIndex","newStatus","medicalCheck","concat","variant","children","className","md","onClick","Body","Title","style","fontSize","user","name","Text","href","email","illnessDescription","orderItems","status"],"sources":["C:/Users/陈云林/Desktop/health/health-project/frontend/src/screens/EditOrderScreen.js"],"sourcesContent":["import React, { useEffect } from 'react'\r\nimport { useParams, useNavigate } from 'react-router-dom'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { Row, Col, Card, Button } from 'react-bootstrap'\r\nimport { editOrderById, updateOrderStatus } from '../actions/staffAction'\r\nimport Loader from '../components/Loader'\r\nimport Message from '../components/Message'\r\n\r\nconst EditOrderScreen = () => {\r\n  const { id: orderId } = useParams()\r\n  const navigate = useNavigate()\r\n  const dispatch = useDispatch()\r\n\r\n  const editOrder = useSelector(state => state.editOrder)\r\n  const { loading, error, orderDetial } = editOrder\r\n  const updateStatusInfo = useSelector(state => state.orderUpdateStatus)\r\n  const { success } = updateStatusInfo\r\n\r\n  useEffect(() => {\r\n    dispatch(editOrderById(orderId))\r\n  }, [dispatch, orderId])\r\n\r\n  //如果成功 重新发送\r\n  useEffect(() => {\r\n    if (success) {\r\n      dispatch(editOrderById(orderId))\r\n    }\r\n  }, [dispatch, orderId, success])\r\n\r\n  const updateStatus = (itemIndex, newStatus) => {\r\n    dispatch(updateOrderStatus(orderId, itemIndex, newStatus))\r\n  }\r\n\r\n  const medicalCheck = (orderId) => {\r\n\r\n    navigate(`/staffs/orders/${orderId}/check`)\r\n  }\r\n\r\n\r\n  if (loading) return <Loader />\r\n  if (error) return <Message variant='danger'>{error}</Message>\r\n  if (!orderDetial) return <Message variant='info'>Order not found</Message>\r\n\r\n  return (\r\n    <Row className=\"justify-content-md-center\">\r\n      <Col md={6}>\r\n        <Card className=\"text-center\" onClick={() => medicalCheck(orderId)}>\r\n          <Card.Body>\r\n            <Card.Title style={{ fontSize: '24px' }}>{orderDetial.user.name}</Card.Title>\r\n            <Card.Text style={{ fontSize: '20px' }}>\r\n              <a href={`mailto:${orderDetial.user.email}`}>{orderDetial.user.email}</a>\r\n            </Card.Text>\r\n            <Card.Text style={{ fontSize: '20px' }}>illnessDescription:{orderDetial.illnessDescription}</Card.Text>\r\n            <Card.Text style={{ fontSize: '20px' }}>Status: {orderDetial.orderItems[0].status}</Card.Text>\r\n            <Button variant=\"success\" onClick={() => updateStatus(0, 'Scheduled')} className=\"m-2\">Scheduled</Button>\r\n            <Button variant=\"danger\" onClick={() => updateStatus(0, 'Cancelled')} className=\"m-2\">Cancelled</Button>\r\n            <Button variant=\"warning\" onClick={() => updateStatus(0, 'Transfer')} className=\"m-2\">Transfer</Button>\r\n          </Card.Body>\r\n        </Card>\r\n      </Col>\r\n    </Row>\r\n  )\r\n}\r\n\r\nexport default EditOrderScreen\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}