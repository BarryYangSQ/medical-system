{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Link,useNavigate,useLocation}from'react-router-dom';import{Form,Button,Row,Col}from'react-bootstrap';import{useDispatch,useSelector}from'react-redux';import Message from'../components/Message';import Loader from'../components/Loader';import FormContainer from'../components/FormContainer';import{creatMedical}from'../actions/staffAction';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const MedicalScreen=()=>{const[prescription,setPrescription]=useState('');const[result,setResult]=useState('');const[test,setTest]=useState('');const[date,setDate]=useState('');const dispatch=useDispatch();const navigate=useNavigate();const location=useLocation();const{userInfo}=useSelector(state=>state.userLogin);const editOrder=useSelector(state=>state.editOrder);const{loading,error,orderDetial}=editOrder;// 使用解构来提取数据\nconst{user:{_id:userId,name,email,dateOfBirth},orderItems}=orderDetial;const staffId=orderItems&&orderItems.length>0&&orderItems[0].staff?orderItems[0].staff._id:undefined;const formattedDateOfBirth=new Date(dateOfBirth).toLocaleDateString('en-UK');//表单提交函数\nconst submitHandler=e=>{e.preventDefault();console.log(userId,userInfo._id,prescription,result,test,date);dispatch(creatMedical(userId,userInfo._id,prescription,result,test,date));};return/*#__PURE__*/_jsxs(FormContainer,{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"EDIT MEDICAL HISTORY\"}),error&&/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:error}),loading&&/*#__PURE__*/_jsx(Loader,{}),/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsxs(Col,{md:6,children:[/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:12,children:/*#__PURE__*/_jsx(\"h4\",{children:\"User Name: \"})}),/*#__PURE__*/_jsx(Col,{md:12,children:name})]}),/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:12,children:\"User Email: \"}),/*#__PURE__*/_jsx(Col,{md:12,children:/*#__PURE__*/_jsx(\"a\",{href:\"mailto:\".concat(email),children:email})})]}),/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsxs(Col,{md:12,children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Date of Birth:\"}),\" \"]}),/*#__PURE__*/_jsx(Col,{md:12,children:formattedDateOfBirth})]})]}),/*#__PURE__*/_jsx(Col,{md:6,children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:12,children:/*#__PURE__*/_jsx(\"h4\",{children:\"Illness Description:\"})}),/*#__PURE__*/_jsx(Col,{md:12,children:orderDetial.illnessDescription})]})})]}),/*#__PURE__*/_jsxs(Form,{onSubmit:submitHandler,children:[/*#__PURE__*/_jsxs(Form.Group,{controlId:\"prescription\",children:[/*#__PURE__*/_jsx(Form.Label,{children:/*#__PURE__*/_jsx(\"h4\",{children:\"Medical Prescription:\"})}),/*#__PURE__*/_jsx(Form.Control,{type:\"prescription\",placeholder:\"Please enter prescription\",value:prescription,onChange:e=>setPrescription(e.target.value)})]}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"result\",children:[/*#__PURE__*/_jsx(Form.Label,{children:/*#__PURE__*/_jsx(\"h4\",{children:\"Diagnostic Result:\"})}),/*#__PURE__*/_jsx(Form.Control,{type:\"result\",placeholder:\"Please enter Result\",value:result,onChange:e=>setResult(e.target.value)})]}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"test\",children:[/*#__PURE__*/_jsx(Form.Label,{children:/*#__PURE__*/_jsx(\"h4\",{children:\"Test\\uFF1A\"})}),/*#__PURE__*/_jsxs(Form.Control,{as:\"select\"// 下拉选择框\n,value:test,onChange:e=>setTest(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select \"}),/*#__PURE__*/_jsx(\"option\",{value:\"Blood test\",children:\"Blood test\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Urine test\",children:\"Urine test\"}),/*#__PURE__*/_jsx(\"option\",{value:\"other\",children:\"other\"})]})]}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"date\",children:[/*#__PURE__*/_jsx(Form.Label,{children:/*#__PURE__*/_jsx(\"h4\",{children:\"Date of Test\\uFF1A\"})}),/*#__PURE__*/_jsx(Form.Control,{type:\"date\"// 注意这里使用了 date 类型\n,placeholder:\"Please select a date\",value:date,onChange:e=>setDate(e.target.value)})]}),/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"primary\",style:{marginTop:'20px'},children:\"EDIT MEDICAL HISTORY\"})]})]});};export default MedicalScreen;","map":{"version":3,"names":["React","useState","useEffect","Link","useNavigate","useLocation","Form","Button","Row","Col","useDispatch","useSelector","Message","Loader","FormContainer","creatMedical","jsx","_jsx","jsxs","_jsxs","MedicalScreen","prescription","setPrescription","result","setResult","test","setTest","date","setDate","dispatch","navigate","location","userInfo","state","userLogin","editOrder","loading","error","orderDetial","user","_id","userId","name","email","dateOfBirth","orderItems","staffId","length","staff","undefined","formattedDateOfBirth","Date","toLocaleDateString","submitHandler","e","preventDefault","console","log","children","variant","md","href","concat","illnessDescription","onSubmit","Group","controlId","Label","Control","type","placeholder","value","onChange","target","as","style","marginTop"],"sources":["C:/Users/陈云林/Desktop/health/health-project/frontend/src/screens/MedicalScreen.js"],"sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport { Link, useNavigate, useLocation } from 'react-router-dom'\r\nimport { Form, Button, Row, Col } from 'react-bootstrap'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport Message from '../components/Message'\r\nimport Loader from '../components/Loader'\r\nimport FormContainer from '../components/FormContainer'\r\nimport { creatMedical } from '../actions/staffAction'\r\n\r\nconst MedicalScreen = () => {\r\n  const [prescription, setPrescription] = useState('')\r\n  const [result, setResult] = useState('')\r\n  const [test, setTest] = useState('')\r\n  const [date, setDate] = useState('')\r\n\r\n  const dispatch = useDispatch()\r\n  const navigate = useNavigate()\r\n  const location = useLocation()\r\n  const { userInfo } = useSelector(state => state.userLogin)\r\n  const editOrder = useSelector(state => state.editOrder)\r\n  const { loading, error, orderDetial } = editOrder\r\n  // 使用解构来提取数据\r\n  const { user: { _id: userId, name, email, dateOfBirth }, orderItems } = orderDetial\r\n  const staffId = orderItems && orderItems.length > 0 && orderItems[0].staff ? orderItems[0].staff._id : undefined\r\n  const formattedDateOfBirth = new Date(dateOfBirth).toLocaleDateString('en-UK')\r\n\r\n\r\n\r\n\r\n  //表单提交函数\r\n  const submitHandler = (e) => {\r\n    e.preventDefault()\r\n    console.log(userId, userInfo._id, prescription, result, test, date)\r\n\r\n    dispatch(creatMedical(userId, userInfo._id, prescription, result, test, date)\r\n\r\n\r\n    )\r\n  }\r\n\r\n\r\n\r\n  return (\r\n    <FormContainer>\r\n\r\n      <h1>EDIT MEDICAL HISTORY</h1>\r\n\r\n      {error && <Message variant='danger'>{error}</Message>}\r\n      {loading && <Loader />}\r\n      <Row>\r\n        <Col md={6}>\r\n          <Row>\r\n            <Col md={12}><h4>User Name: </h4></Col>\r\n            <Col md={12}>{name}</Col>\r\n          </Row>\r\n          <Row>\r\n            <Col md={12}>User Email: </Col>\r\n            <Col md={12}><a href={`mailto:${email}`}>{email}</a></Col>\r\n          </Row>\r\n          <Row>\r\n            <Col md={12}><h4>Date of Birth:</h4> </Col>\r\n            <Col md={12}>{formattedDateOfBirth}</Col>\r\n          </Row>\r\n        </Col>\r\n        <Col md={6}>\r\n          <Row>\r\n            <Col md={12}><h4>Illness Description:</h4></Col>\r\n            <Col md={12}>{orderDetial.illnessDescription}</Col>\r\n          </Row>\r\n        </Col>\r\n      </Row>\r\n\r\n      <Form onSubmit={submitHandler}>\r\n\r\n        <Form.Group controlId='prescription'>\r\n          <Form.Label><h4>Medical Prescription:</h4></Form.Label>\r\n          <Form.Control\r\n            type='prescription'\r\n            placeholder='Please enter prescription'\r\n            value={prescription}\r\n            onChange={(e) => setPrescription(e.target.value)}\r\n          ></Form.Control>\r\n        </Form.Group>\r\n\r\n        <Form.Group controlId='result'>\r\n          <Form.Label><h4>Diagnostic Result:</h4></Form.Label>\r\n          <Form.Control\r\n            type='result'\r\n            placeholder='Please enter Result'\r\n            value={result}\r\n            onChange={(e) => setResult(e.target.value)}\r\n          ></Form.Control>\r\n        </Form.Group>\r\n\r\n\r\n        <Form.Group controlId='test'>\r\n          <Form.Label><h4>Test：</h4></Form.Label>\r\n          <Form.Control\r\n            as='select' // 下拉选择框\r\n            value={test}\r\n            onChange={(e) => setTest(e.target.value)}\r\n          >\r\n            <option value=''>Select </option>\r\n            <option value='Blood test'>Blood test</option>\r\n            <option value='Urine test'>Urine test</option>\r\n            <option value='other'>other</option>\r\n          </Form.Control>\r\n        </Form.Group>\r\n\r\n\r\n        <Form.Group controlId='date'>\r\n          <Form.Label><h4>Date of Test：</h4></Form.Label>\r\n          <Form.Control\r\n            type='date' // 注意这里使用了 date 类型\r\n            placeholder='Please select a date'\r\n            value={date}\r\n            onChange={(e) => setDate(e.target.value)}\r\n          ></Form.Control>\r\n        </Form.Group>\r\n\r\n        <Button type='submit' variant='primary' style={{ marginTop: '20px' }}>\r\n          EDIT MEDICAL HISTORY\r\n        </Button>\r\n      </Form>\r\n    </FormContainer>\r\n  )\r\n}\r\n\r\nexport default MedicalScreen"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}