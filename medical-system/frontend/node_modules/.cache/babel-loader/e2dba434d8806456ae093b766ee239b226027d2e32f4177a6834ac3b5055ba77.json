{"ast":null,"code":"import React,{useEffect}from'react';import{Link}from'react-router-dom';import{ListGroup,Row,Col,Image,Card}from'react-bootstrap';import{useDispatch,useSelector}from'react-redux';import{useParams}from'react-router-dom';import{getOrderDetails}from'../actions/orderAction';import Message from'../components/Message';import Loader from'../components/Loader';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const OrderScreen=()=>{// 使用 useParams 钩子获取路由参数\nconst{id:orderId}=useParams();const dispatch=useDispatch();const orderDetails=useSelector(state=>state.orderDetails);const{order,loading,error}=orderDetails;useEffect(()=>{// 确保 order 已经定义并且 order._id 不等于 orderId\nif(!order||order&&order._id!==orderId){dispatch(getOrderDetails(orderId));}// eslint-disable-next-line\n},[order,orderId]);const formatDate=dateStr=>{const date=new Date(dateStr);return new Intl.DateTimeFormat({year:'numeric',month:'2-digit',day:'2-digit'}).format(date);};const getStatusMessage=status=>{switch(status){case'Scheduled':return{variant:'info',message:'Scheduled'};case'Completed':return{variant:'success',message:'Completed'};case'Cancelled':return{variant:'danger',message:'Cancelled'};case'Ready':return{variant:'warning',message:'Ready'};default:return{variant:'secondary',message:'Unknow'};}};return loading?/*#__PURE__*/_jsx(Loader,{}):error?/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:error}):order?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"h1\",{className:\"text-center\",children:[\"Appointment Num\\uFF1A\",order._id]}),/*#__PURE__*/_jsx(Row,{className:\"justify-content-center\",children:/*#__PURE__*/_jsx(Col,{md:8,children:/*#__PURE__*/_jsxs(ListGroup,{variant:\"flush\",children:[/*#__PURE__*/_jsxs(ListGroup.Item,{className:\"text-center\",children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"Name: \",order.user.name]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Email: \",/*#__PURE__*/_jsx(\"a\",{href:\"mailto:\".concat(order.user.email),children:order.user.email})]}),/*#__PURE__*/_jsx(\"h2\",{children:\"Description of the illness or complain\"}),/*#__PURE__*/_jsx(\"p\",{children:order.illnessDescription})]}),/*#__PURE__*/_jsxs(ListGroup.Item,{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Appointment Request Form\"}),order.orderItems.length===0?/*#__PURE__*/_jsx(Message,{children:\"Appointment Request Form is Null\"}):/*#__PURE__*/_jsx(ListGroup,{variant:\"flush\",children:order.orderItems.map((item,index)=>/*#__PURE__*/_jsx(ListGroup.Item,{className:\"text-center\",children:/*#__PURE__*/_jsxs(Row,{className:\"justify-content-center align-items-center\",children:[/*#__PURE__*/_jsx(Col,{md:1,children:/*#__PURE__*/_jsx(Image,{src:item.staff.image,alt:item.staff.name,fluid:true,rounded:true})}),/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(Link,{to:\"/staffs/\".concat(item.staff),children:item.staff.name})}),/*#__PURE__*/_jsxs(Col,{md:3,children:[/*#__PURE__*/_jsx(Row,{children:item.staff.department}),/*#__PURE__*/_jsx(Row,{children:item.staff.position})]}),/*#__PURE__*/_jsx(Col,{md:2,children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{children:formatDate(item.date)}),/*#__PURE__*/_jsx(Col,{children:item.slot})]})}),/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(Message,{...getStatusMessage(item.status),children:getStatusMessage(item.status).message})})]})},index))})]})]})})})]}):/*#__PURE__*/_jsx(Message,{children:\"Order is not found.\"});};export default OrderScreen;","map":{"version":3,"names":["React","useEffect","Link","ListGroup","Row","Col","Image","Card","useDispatch","useSelector","useParams","getOrderDetails","Message","Loader","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","OrderScreen","id","orderId","dispatch","orderDetails","state","order","loading","error","_id","formatDate","dateStr","date","Date","Intl","DateTimeFormat","year","month","day","format","getStatusMessage","status","variant","message","children","className","md","Item","user","name","href","concat","email","illnessDescription","orderItems","length","map","item","index","src","staff","image","alt","fluid","rounded","to","department","position","slot"],"sources":["C:/Users/陈云林/Desktop/health/health-project/frontend/src/screens/OrderScreen.js"],"sourcesContent":["import React, { useEffect } from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport { ListGroup, Row, Col, Image, Card } from 'react-bootstrap'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { useParams } from 'react-router-dom'\r\nimport { getOrderDetails } from '../actions/orderAction'\r\nimport Message from '../components/Message'\r\nimport Loader from '../components/Loader'\r\n\r\nconst OrderScreen = () => {\r\n  // 使用 useParams 钩子获取路由参数\r\n  const { id: orderId } = useParams()\r\n  const dispatch = useDispatch()\r\n\r\n  const orderDetails = useSelector((state) => state.orderDetails)\r\n  const { order, loading, error } = orderDetails\r\n\r\n\r\n  useEffect(() => {\r\n    // 确保 order 已经定义并且 order._id 不等于 orderId\r\n    if (!order || (order && order._id !== orderId)) {\r\n      dispatch(getOrderDetails(orderId))\r\n    }\r\n    // eslint-disable-next-line\r\n  }, [order, orderId])\r\n\r\n  const formatDate = (dateStr) => {\r\n    const date = new Date(dateStr)\r\n    return new Intl.DateTimeFormat({\r\n      year: 'numeric',\r\n      month: '2-digit',\r\n      day: '2-digit'\r\n    }).format(date)\r\n  }\r\n\r\n\r\n  const getStatusMessage = (status) => {\r\n    switch (status) {\r\n      case 'Scheduled':\r\n        return { variant: 'info', message: 'Scheduled' }\r\n      case 'Completed':\r\n        return { variant: 'success', message: 'Completed' }\r\n      case 'Cancelled':\r\n        return { variant: 'danger', message: 'Cancelled' }\r\n      case 'Ready':\r\n        return { variant: 'warning', message: 'Ready' }\r\n      default:\r\n        return { variant: 'secondary', message: 'Unknow' }\r\n    }\r\n  }\r\n\r\n\r\n  return loading ? (\r\n    <Loader />\r\n  ) : error ? (\r\n    <Message variant='danger'>{error}</Message>\r\n  ) : order ? (\r\n    <>\r\n      <h1 className=\"text-center\">Appointment Num：{order._id}</h1>\r\n      <Row className=\"justify-content-center\">\r\n        <Col md={8}>\r\n          <ListGroup variant='flush'>\r\n            <ListGroup.Item className=\"text-center\">\r\n              <h2>Name: {order.user.name}</h2>\r\n              <p>Email: <a href={`mailto:${order.user.email}`}>{order.user.email}</a></p>\r\n              <h2>Description of the illness or complain</h2>\r\n              <p>{order.illnessDescription}</p>\r\n            </ListGroup.Item>\r\n\r\n            <ListGroup.Item className=\"text-center\">\r\n              <h2>Appointment Request Form</h2>\r\n              {order.orderItems.length === 0 ? (\r\n                <Message>Appointment Request Form is Null</Message>\r\n              ) : (\r\n                <ListGroup variant='flush'>\r\n                  {order.orderItems.map((item, index) => (\r\n                    <ListGroup.Item key={index} className=\"text-center\">\r\n                      <Row className=\"justify-content-center align-items-center\">\r\n                        <Col md={1}>\r\n                          <Image src={item.staff.image} alt={item.staff.name} fluid rounded />\r\n                        </Col>\r\n                        <Col>\r\n                          <Link to={`/staffs/${item.staff}`}>{item.staff.name}</Link>\r\n                        </Col>\r\n                        <Col md={3}>\r\n                          <Row>{item.staff.department}</Row>\r\n                          <Row>{item.staff.position}</Row>\r\n                        </Col>\r\n\r\n                        <Col md={2}>\r\n                          <Row>\r\n                            <Col>{formatDate(item.date)}</Col>\r\n                            <Col>{item.slot}</Col>\r\n                          </Row>\r\n                        </Col>\r\n                        <Col>\r\n                          <Message {...getStatusMessage(item.status)}>\r\n                            {getStatusMessage(item.status).message}\r\n                          </Message>\r\n                        </Col>\r\n                      </Row>\r\n                    </ListGroup.Item>\r\n                  ))}\r\n                </ListGroup>\r\n              )}\r\n            </ListGroup.Item>\r\n          </ListGroup>\r\n        </Col>\r\n      </Row>\r\n    </>\r\n\r\n\r\n  ) : (\r\n    <Message>Order is not found.</Message>\r\n  )\r\n}\r\n\r\nexport default OrderScreen"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}